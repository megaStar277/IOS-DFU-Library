<!DOCTYPE html>
<html lang="en">
  <head>
    <title>DFUPeripheralSelectorDelegate Protocol Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
	<meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1.0" />
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Protocol/DFUPeripheralSelectorDelegate" class="dashAnchor"></a>
    <a title="DFUPeripheralSelectorDelegate Protocol Reference"></a>
    <header>
      <div class="content-wrapper">
        <p>
          <a href="../index.html">iOSDFULibrary Docs</a>
          <span class="no-mobile"> (51% documented)</span>
        </p>
    
    
      </div>
    </header>
    <div id="breadcrumbs-container">
      <div class="content-wrapper">
        <p id="breadcrumbs">
          <span class="no-mobile">
            <a href="../index.html">iOSDFULibrary Reference</a>
            <img id="carat" src="../img/carat.png" />
          </span>
          DFUPeripheralSelectorDelegate Protocol Reference
        </p>
      </div>
    </div>
    <div class="wrapper">
      <div class="article-wrapper">
        <article class="main-content">
          <section>
            <section class="section">
              <h1>DFUPeripheralSelectorDelegate</h1>
                <div class="declaration">
                  <div class="language">
                    <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">DFUPeripheralSelectorDelegate</span> <span class="p">:</span> <span class="kt">AnyObject</span></code></pre>

                  </div>
                </div>
              <p>The DFUPeripheralSelectorDelegate is used when both the Softdevice (or Softdevice and Bootloader) and Application
are going to be updated, or when a peripheral is to be switched to the bootloader mode that will change its address.</p>

<p>This library supports sending both BIN files from a ZIP Distribution Packet automatically.
However, when sending the Softdevice update, the DFU Bootloader may remove the current application in order to
make space for the new Softdevice firmware (Legacy DFU, or Secure DFU with single bank enabled when new SD+BL are larger then space available)
or may advertise in Bootloader mode for number of seconds (Secure DFU). When the new Softdevice is flashed the bootloader restarts the device
and starts advertising in DFU Bootloader mode.</p>

<p>Since SDK 8.0.0, to solve caching problem on a host that is no bonded (in case there is no Service Changed characteristic),
the bootloader starts to advertise with an address incremented by 1.
The DFU Library has to scan for a peripheral with this new address. However, as iOS does not expose the device
address in the public CoreBluetooth API, address matching, used on Android, can not be used.
Instead, this selector is used. The DFU Service will start scanning for peripherals with a UUID filter, where
the list of required UUID is returned by the <code>filterBy(hint:)</code> method. If your device in the Bootloader mode
does not advertise with any service UUIDs, or this is not enough, you may select a target device
by their advertising packet or RSSI using this delegate.</p>

<p>In SDK 14.0.0 a new feature was added to the Buttonless DFU for non-bonded devices which allows to send a unique name
to the device before it is switched to bootloader mode. After jump, the bootloader will advertise with this name
as the Complete Local Name making it easy to select proper device. In this case you don&rsquo;t have to override the default
peripheral selector. More: <a href="http://infocenter.nordicsemi.com/topic/com.nordic.infocenter.sdk5.v14.0.0/service_dfu.html">http://infocenter.nordicsemi.com/topic/com.nordic.infocenter.sdk5.v14.0.0/service_dfu.html</a></p>

            </section>
            <section class="section task-group-section">
              <div class="task-group">
                <ul>
                  <li class="item">
                    <div>
                      <code>
                      <a name="/c:@M@iOSDFULibrary@objc(pl)DFUPeripheralSelectorDelegate(im)select:advertisementData:RSSI:hint:"></a>
                      <a name="//apple_ref/swift/Method/select(_:advertisementData:RSSI:hint:)" class="dashAnchor"></a>
                      <a class="token" href="#/c:@M@iOSDFULibrary@objc(pl)DFUPeripheralSelectorDelegate(im)select:advertisementData:RSSI:hint:">select(_:advertisementData:RSSI:hint:)</a>
                      </code>
                    </div>
                    <div class="height-container">
                      <div class="pointer-container"></div>
                      <section class="section">
                        <div class="pointer"></div>
                        <div class="abstract">
                          <p>Returns whether the given peripheral is a device in DFU Bootloader mode.</p>

                        </div>
                        <div class="declaration">
                          <h4>Declaration</h4>
                          <div class="language">
                            <p class="aside-title">Swift</p>
                            <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">func</span> <span class="nf">select</span><span class="p">(</span><span class="n">_</span> <span class="nv">peripheral</span><span class="p">:</span> <span class="kt">CBPeripheral</span><span class="p">,</span> <span class="nv">advertisementData</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">AnyObject</span><span class="p">],</span> <span class="kt">RSSI</span><span class="p">:</span> <span class="kt">NSNumber</span><span class="p">,</span> <span class="n">hint</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span></code></pre>

                          </div>
                        </div>
                        <div>
                          <h4>Parameters</h4>
                          <table class="graybox">
                            <tbody>
                              <tr>
                                <td>
                                  <code>
                                  <em>peripheral</em>
                                  </code>
                                </td>
                                <td>
                                  <div>
                                    <p>the peripheral to be checked</p>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <code>
                                  <em>advertisementData</em>
                                  </code>
                                </td>
                                <td>
                                  <div>
                                    <p>scanned advertising data</p>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <code>
                                  <em>RSSI</em>
                                  </code>
                                </td>
                                <td>
                                  <div>
                                    <p>received signal strength indication in dBm</p>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <code>
                                  <em>name</em>
                                  </code>
                                </td>
                                <td>
                                  <div>
                                    <p>an optional name to look for in the advertisement packet (see Buttonless DFU in SDK 14)</p>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        <div>
                          <h4>Return Value</h4>
                          <p>true (YES) if given peripheral is what service is looking for</p>
                        </div>
                      </section>
                    </div>
                  </li>
                  <li class="item">
                    <div>
                      <code>
                      <a name="/c:@M@iOSDFULibrary@objc(pl)DFUPeripheralSelectorDelegate(im)filterByHint:"></a>
                      <a name="//apple_ref/swift/Method/filterBy(hint:)" class="dashAnchor"></a>
                      <a class="token" href="#/c:@M@iOSDFULibrary@objc(pl)DFUPeripheralSelectorDelegate(im)filterByHint:">filterBy(hint:)</a>
                      </code>
                    </div>
                    <div class="height-container">
                      <div class="pointer-container"></div>
                      <section class="section">
                        <div class="pointer"></div>
                        <div class="abstract">
                          <p>Returns an optional list of services that the scanner will use to filter advertising packets
when scanning for a device in DFU Bootloader mode. To find out what UUID you should return,
switch your device to DFU Bootloader mode (with a button!) and check the advertisment packet.
The result of this method will be applied to
<code>centralManager.scanForPeripheralsWithServices([CBUUID]?, options: [String : AnyObject]?)</code></p>

                        </div>
                        <div class="declaration">
                          <h4>Declaration</h4>
                          <div class="language">
                            <p class="aside-title">Swift</p>
                            <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">func</span> <span class="nf">filterBy</span><span class="p">(</span><span class="n">hint</span> <span class="nv">dfuServiceUUID</span><span class="p">:</span> <span class="kt">CBUUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">CBUUID</span><span class="p">]?</span></code></pre>

                          </div>
                        </div>
                        <div>
                          <h4>Parameters</h4>
                          <table class="graybox">
                            <tbody>
                              <tr>
                                <td>
                                  <code>
                                  <em>dfuServiceUUID</em>
                                  </code>
                                </td>
                                <td>
                                  <div>
                                    <p>the UUID of the DFU service that was used to flash SoftDevice and/or Bootloader.
Usually this service UUID is present in the DFU Bootloader&rsquo;s advertising packet. Then this method may simply
return [dfuServiceUUID].</p>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        <div>
                          <h4>Return Value</h4>
                          <p>an optional list of services or nil</p>
                        </div>
                      </section>
                    </div>
                  </li>
                </ul>
              </div>
            </section>
          </section>
        </article>
      </div>
      <div class="nav-wrapper">
        <nav class="nav-bottom">
          <ul class="nav-groups">
            <li class="nav-group-name">
              <a href="../Classes.html">Classes</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="../Classes/DFUFirmware.html">DFUFirmware</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/DFUFirmwareSize.html">DFUFirmwareSize</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/DFUPeripheralSelector.html">DFUPeripheralSelector</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/DFUServiceController.html">DFUServiceController</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/DFUServiceInitiator.html">DFUServiceInitiator</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/DFUUuidHelper.html">DFUUuidHelper</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/LegacyDFUServiceInitiator.html">LegacyDFUServiceInitiator</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Classes/SecureDFUServiceInitiator.html">SecureDFUServiceInitiator</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="../Enums.html">Enumerations</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="../Enums/DFUError.html">DFUError</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Enums/DFUFirmwareType.html">DFUFirmwareType</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Enums/DFUState.html">DFUState</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Enums/LogLevel.html">LogLevel</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="../Extensions.html">Extensions</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="../Extensions/Data.html">Data</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Extensions/String.html">String</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="../Protocols.html">Protocols</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="../Protocols/DFUPeripheralSelectorDelegate.html">DFUPeripheralSelectorDelegate</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Protocols/DFUProgressDelegate.html">DFUProgressDelegate</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Protocols/DFUServiceDelegate.html">DFUServiceDelegate</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Protocols/DataConvertible.html">DataConvertible</a>
                </li>
                <li class="nav-group-task">
                  <a href="../Protocols/LoggerDelegate.html">LoggerDelegate</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
      <div class="footer-wrapper">
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="https://github.com/NordicSemiconductor/IOS-Pods-DFU-Library" target="_blank" rel="external">Nordic Semiconductor</a>. All rights reserved. (Last updated: 2018-07-30)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </div>
    </div>
  </body>
</div>
</html>
